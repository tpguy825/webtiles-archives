<!DOCTYPE html>
<html lang="en">
<head>
    <style>.tile-body {
  text-align: center;
  width: 100%;
  height: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
}

a {
  cursor: pointer;
  color: #ff69b4;
  text-decoration: underline;
}

button, .btn {
  color: #000;
  cursor: pointer;
  background-color: pink;
  border: 1px solid #ff69b4;
  border-radius: 5px;
  padding: .25rem .5rem;
}

#version {
  cursor: help;
}

#header, #center, #footer, #store {
  box-sizing: border-box;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  padding: 10px;
  display: flex;
  position: absolute;
}

#header {
  top: 0;
}

#center {
  border: 2px dashed #ff69b4;
}

#center, #store {
  top: 0;
  bottom: 0;
}

#footer {
  flex-direction: row;
  justify-content: space-between;
  bottom: 0;
}

#footer > * {
  flex-grow: 1;
  flex-basis: 0;
}

#title {
  color: #ff69b4;
  margin: 0;
}

#button {
  aspect-ratio: 1;
  cursor: pointer;
  background-color: #0000;
  border: none;
  height: 75px;
  padding: 0;
}

#button img {
  aspect-ratio: 1;
  background-color: #ff69b4;
  border-radius: 50%;
  width: 100%;
}

#store {
  background-color: pink;
  justify-content: flex-start;
  gap: .5rem;
  transition-duration: .5s;
  transition-timing-function: ease;
  overflow: scroll;
}

#items {
  flex-direction: column;
  gap: .5rem;
  display: flex;
}

#store a {
  color: #000;
}

#store #close-store {
  position: absolute;
  top: 15px;
  left: 15px;
}
</style>
</head>
<body>
    <div id="header">
        <h2 id="title">ClickerGame2026</h2>
    	<span id="score">click to begin</span>
    	<span id="autoclickers-display"></span>
    </div>
    
    <div id="center">
        <button id="button">
            <img src="/t/nekoramuza.moe/transparent.png">
        </button>
    </div>
    
    <div id="footer">
        <a id="save">save</a>
        
        <a id="open-store">store</a>
        
        <span id="version" title="made by nekoramuza [kat.nekoweb.org]"></span>
    </div>
    
    <div id="store" style="transform:translateY(100%);">
        <h3>Store</h3>
        
        <div id="items">
            
        </div>
        
        <span>more to come soonâ„¢</span>
        <a id="close-store">close</a>
    </div>
    
    <script type="text/tilescript">var version = 1

var versionText = document.getElementById("version")
versionText.innerText = "v" + version

// save system
function loadValue(name, start, type) {
    var value = localStorage.getItem(name)
    
    if (!value) return start
    
    if (!type || type === "int") {
        value = parseInt(value)
    } else if (type === "float") {
        value = parseFloat(value)
    } else if (type === "bool") {
        value = value === "true"
    }
    
    return value
}

function saveValue(name, value) {
    localStorage.setItem(name, value.toString())
}

var total_score = loadValue("total_score", 0)
var score = loadValue("score", 0)
var strength = loadValue("strength", 1)
var autoclickers = loadValue("autoclickers", 0)
var autoclickers_strength = loadValue("autoclickers_strength", 1)
var autoclickers_interval = loadValue("autoclickers_interval", 1000)

// works for now lol
var save = document.getElementById("save")
function saveAll(before, after) {
    if (save.innerText !== "save") return;
    
    save.innerText = before || "saving..."
    
    saveValue("total_score", total_score)
    saveValue("score", score)
    saveValue("strength", strength)
    saveValue("autoclickers", autoclickers)
    saveValue("version", version)
    
    save.innerText = after || "saved!"
    
    setTimeout(function() {
        save.innerText = "save"
    }, 2000)
}

save.onclick = function() {
    saveAll()
}

setInterval(function() {
    saveAll("autosaving...", "autosaved")
}, 30 * 1000)

// clicker
var button = document.getElementById("button")

var scoreDisplay = document.getElementById("score")
var autoclickersDisplay = document.getElementById("autoclickers-display")
function updateUI() {
    scoreDisplay.innerText = "score: " + score
    autoclickersDisplay.innerText = "autoclickers: " + autoclickers
}

updateUI()

function click(amount) {
    total_score += amount
    score += amount
    
    updateUI()
}

button.onclick = function() {
    click(strength)
}

setInterval(function() {
    click(autoclickers * autoclickers_strength)
}, autoclickers_interval)

// store
var store = document.getElementById("store")

function setStoreVisibility(visible) {
    if (visible) {
        store.style["transform"] = ""
    } else {
        store.style["transform"] = "translateY(100%)"
    }  
}

var items = document.getElementById("items")

function addStoreItem(name, cost, owned, callback, oneTime) {
    var newItem = document.createElement("button")
    
    function updateLabel() {
        newItem.innerText = name + " (" + owned + ") // Cost: " + cost
    }
    
    updateLabel()
    newItem.id = name.trim().toLowerCase().split(" ").join("-")
    
    newItem.onclick = function() {
        var quantity = 1
        var total = quantity * cost
        
        if (score >= total) {
            score -= total
            
            owned += quantity
        	callback(quantity, owned)
            
            updateLabel()
            updateUI()
        }
    }
    
    items.appendChild(newItem)
}

var openStore = document.getElementById("open-store")
openStore.onclick = function() { setStoreVisibility(true) }

var openStore = document.getElementById("close-store")
openStore.onclick = function() { setStoreVisibility(false) }

// game
addStoreItem("Click Strength", 50, strength, function() {
    strength += 1
})

addStoreItem("Auto Clicker", 100, autoclickers, function() {
    autoclickers += 1
})</script>
</body>
</html>